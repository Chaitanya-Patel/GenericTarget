<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Generic Target</title>
<link rel="stylesheet" href="core/design.css">

</head>
<body>
<header>
<div class="header_title">Generic Target</div>
<div class="header_version">Version 20230526</div>
</header>
<button onclick="PageToTop()" id="buttonToTop"></button>
<div class="wrapper">
<div class="navigation">
<ul class="ulnav">
<li class="linone"></li>
<li class="linav"><a href="index.html">Overview</a></li>
<li class="linav_active"><a href="developmentnotes.html">Development Notes</a></li>
<li class="linone"></li>
<li class="litext">GETTING STARTED</li>
<li class="linav"><a href="installtoolbox.html">Install Generic Target Toolbox</a></li>
<li class="linav"><a href="preparetarget.html">Prepare Target Computer</a></li>
<li class="linav"><a href="createanddeploy.html">Create and Deploy a Model</a></li>
<li class="linone"></li>
<li class="litext">HOW THE APPLICATION WORKS</li>
<li class="linav"><a href="application.html">Application Overview</a></li>
<li class="linav"><a href="udpobjectmanager.html">UDP Object Manager</a></li>
<li class="linav"><a href="multicastudpobjectmanager.html">Multicast UDP Object Manager</a></li>
<li class="linav"><a href="datarecorder.html">Data Recorder Manager</a></li>
<li class="linone"></li>
<li class="linav"><a href="textlog.html">Protocol File</a></li>
<li class="linav"><a href="simulinkinterface.html">Autogenerated Interface Class</a></li>
<li class="linav"><a href="threads.html">Thread Overview</a></li>
<li class="linav"><a href="timingscheduling.html">Timing & Scheduling</a></li>
<li class="linone"></li>
<li class="litext">HOW THE DEPLOYMENT WORKS</li>
<li class="linav"><a href="buildoverview.html">Overview</a></li>
<li class="linav"><a href="buildanddeploy.html">Deployment Process</a></li>
<li class="linav"><a href="framework.html">Target Software Directory</a></li>
</ul>

</div>
<div class="content">
<h1>Development Notes</h1>
    Here some points are addressed that should be considered when developing the Simulink model to
    avoid complications in combination with the Generic Target Toolbox. Some points seem trivial,
    others don't seem immediately obvious and can cause problems during code generation and
    compilation on the target. If problems occur, it may be worth looking at this page.

<h3>Use the Template Simulink Model</h3>
    The <code>GT.GetTemplate()</code> command copies a template Simulink model into the current directory.
    In this template all necessary settings are set so that the code generation generates code in such a way
    that it can be further used in a correct way afterwards in the <a href="buildanddeploy.html">deployment process</a>.
    If code-generation-related settings are changed, the entire deployment process may stop working.
    Different sample rates are processed in parallel on the target in different threads.
    Therefore the option <b>Allow tasks to execute concurrently on target</b> must be enabled in the simulink settings (Fixed-step solver).

<h3>Rate-Transition Block</h3>
    Different samplerates in the model are connected by rate transition blocks.
    On the target computer the threads are executed in concurrence to each other.
    To ensure data integrity, the option <b>Ensure data integrity during data transfer</b> must be enabled in the rate-transition block.

<h3>Fixed Application Port</h3>
    At startup, the application binds a UDP port on the target.
    This port has multiple functions.
    The application can be terminated using a specific message.
    At the same time, an already assigned port means that an application is already running on that port (this can be any application).
    This helps to avoid that the same target application is executed multiple times.
    The port itself can be set before the code generation with the attribute <code>portAppSocket</code> in the <code>GT.GenericTarget</code> MATLAB class.
    The port should no longer be used within the Simulink model as it will never bind successfully.

<h3>Multiple Applications</h3>
    If multiple generic target applications are to run on the same target, the application port must be different for each application.
    At the same time, the target software directory must be adjusted, otherwise the software directory of an application will be overwritten when deploying another application.
    Both parameters can be set with the <code>portAppSocket</code> and <code>targetSoftwareDirectory</code> attributes in the <code>GT.GenericTarget</code> MATLAB class.

<h3>Avoid Main</h3>
    During the <a href="buildanddeploy.html">deployment process</a> all files of the code generation are checked for the expressions <code>int_T main(</code> and <code>int main(</code>.
    Files containing these expressions are removed.
    This is necessary because the Generic Target Framework comes with its own main entry function.
    Since no distinction is made as to whether the expressions are in a comment, there is thus a risk that incorrect files will also be removed which contain these expressions only in comments or strings, for example.

<h3>Avoid Console Outputs</h3>
    The console output of the application is redirected to a text file.
    Many console outputs can thus result in a large text file.
    In addition, the output can come from multiple threads at the same time, so that multiple console outputs get mixed up.

<h3>Legacy Code Tool: Use Unique Filenames</h3>
    The MATLAB legacy code tool can be used to generate a simulink block directly from a given C/C++ code.
    The Generic Target library blocks are created with the legacy code tool.
    When generating code for a Simulink model, all code files belonging to the blocks generated with the legacy code tool are copied to one directory.
    If the same file names are used, this leads to the corresponding files being overwritten several times.
    Therefore, unique file names should be used.
    Also the function names within the code files must not be ambiguous.
    For all driver functions of the generic target toolbox the prefix <code>GT_</code> is used.

<h3>Third-Party Libraries</h3>
    If third-party libraries are used (for example with the legacy code tool), the corresponding library must also be installed on the target.
    To ensure that linking is performed correctly when compiling the application, these third-party libraries must then be added manually to the Makefile on the target (line starts with <code>LIBS_LINUX</code>).

</div>
</div>
<script src="core/script.js"></script>
</body>
</html>
