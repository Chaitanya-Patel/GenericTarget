<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Generic Target</title>
<link rel="stylesheet" href="core/design.css">

</head>
<body>
<header>
<div class="header_title">Generic Target</div>
<div class="header_version">Version 20230323</div>
</header>
<button onclick="PageToTop()" id="buttonToTop"></button>
<div class="wrapper">
<div class="navigation">
<ul class="ulnav">
<li class="linone"></li>
<li class="linav"><a href="index.html">Overview</a></li>
<li class="linav"><a href="developmentnotes.html">Development Notes</a></li>
<li class="linone"></li>
<li class="litext">GETTING STARTED</li>
<li class="linav"><a href="installtoolbox.html">Install Generic Target Toolbox</a></li>
<li class="linav"><a href="preparetarget.html">Prepare Target Computer</a></li>
<li class="linav"><a href="createanddeploy.html">Create and Deploy a Model</a></li>
<li class="linone"></li>
<li class="litext">HOW THE APPLICATION WORKS</li>
<li class="linav"><a href="application.html">Application Overview</a></li>
<li class="linav"><a href="udpobjectmanager.html">UDP Object Manager</a></li>
<li class="linav"><a href="multicastudpobjectmanager.html">Multicast UDP Object Manager</a></li>
<li class="linav"><a href="signalmanager.html">Signal Manager</a></li>
<li class="linone"></li>
<li class="linav"><a href="textlog.html">Text Log</a></li>
<li class="linav"><a href="simulinkinterface.html">Autogenerated Interface Class</a></li>
<li class="linav"><a href="threads.html">Thread Overview</a></li>
<li class="linav"><a href="timingscheduling.html">Timing & Scheduling</a></li>
<li class="linone"></li>
<li class="litext">HOW THE DEPLOYMENT WORKS</li>
<li class="linav"><a href="buildoverview.html">Overview</a></li>
<li class="linav"><a href="buildanddeploy.html">Deployment Process</a></li>
<li class="linav_active"><a href="framework.html">Target Software Directory</a></li>
</ul>

</div>
<div class="content">
<h1>Target Software Directory</h1>
    The MATLAB package contains the source code for the generic target software and a template model for Simulink.
    The <code>GenericTargetCode</code> directory in the MATLAB package has the following structure:
    <br>
    <br>
	<ul class="dir">
		<li>bin</li>
		<li>build</li>
		<li>source</li>
		<li>template</li>
	</ul>
    <ul class="file">
        <li>GenericTargetTemplate.slx</li>
        <li>Makefile</li>
    </ul>
	<br>
    <table>
		<tr><th width="200px">Directory/File</th><th>Description</th></tr>
		<tr><td>bin</td><td>This directory will contain the actual application and the data log files.</td></tr>
		<tr><td>build</td><td>This directory is created during the compilation process. During compilation, object files and dependency files are first created from the source file, which are then linked together to the application. The dependency files ensure that when a source or header file is changed, only those source files are recompiled that depend on the changed files.</td></tr>
		<tr><td>source</td><td>This directory contains the source code for compiling the application. The <code>source/SimulinkCodeGeneration/</code> subfolder will contain the generated C/C++ code for the model and for the Simulink interface class as well as optional custom code.</td></tr>
		<tr><td>template</td><td>Contains some headers that are replaced during the deployment process. It also contains a template interface that is used to create the Simulink interface class.</td></tr>
		<tr><td>GenericTargetTemplate.slx</td><td>Simulink template. Can be copied to the current directory with the MATLAB command <code>GT.GetTemplate()</code>. This template contains all necessary settings to generate the source code as required for the generic target application.</td></tr>
		<tr><td>Makefile</td><td>On the target computer the software is compiled with the g++ compiler. For this purpose the make tool is used, which uses the Makefile to execute appropriate commands. The Makefile compiles all source files in the <code>source/</code> directory.</td></tr>
	</table>
    During <a href="preparetarget.html#step3">setup</a> all directories except the <code>template/</code> folder and <code>GenericTargetTemplate.slx</code> file are copied to the target computer and precompiled once.

<h2>Makros</h2>
    The Generic Target Simulink library contains several driver blocks.
    Some blocks may have no effect during a simulation in Simulink and always give zero or the smallest possible value (e.g. date) as output signal.
    Only when the corresponding code is compiled on the target computer, the actual functionality is integrated.
    The <code>GENERIC_TARGET_IMPLEMENTATION</code> macro can be used to define areas in the C/C++ code which are only enabled on the target computer.

<h2>Compiling with Makefile</h2>
    To compile, the make tool must be executed in the directory of the Makefile. The following commands can be used with the Makefile.

    <h3>make clean</h3>
    The command
    <pre>make clean</pre>
    will delete the <code>build/</code> directory and the application from the <code>bin/</code> directory.
    It also deletes precompiled headers.

    <h3>make all</h3>
    The command
    <pre>make all</pre>
    or just
    <pre>make</pre>
    compiles all source files in the <code>source/</code> directory.
    Then the application is created in the <code>bin/</code> directory.
    With the command
    <pre>make -j8</pre> eight source files are compiled in parallel.
    On a CPU with multiple cores, this can speed up the compilation process.
    During the deploy procedure 8 jobs are used.


</div>
</div>
<script src="core/script.js"></script>
</body>
</html>
